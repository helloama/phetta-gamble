<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="fc:frame" content="vNext" />
    <meta property="fc:frame:image" content="https://your-domain.com/phettamarket.png" />
    <meta property="og:title" content="PhettaMarket üéØ - Predict the Phettaverse" />
    <meta property="og:description" content="Bet PNR tokens on weird Phettaverse scenarios! Will Phetta find the cheese? üßÄ" />
    <title>PhettaMarket üéØ - Predict the Phettaverse</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo-container">
                <div class="logo-year">2042</div>
                <div class="logo-text">
                    <span class="logo-phetta">PHETTA</span>
                    <span class="logo-verse">
                        <span class="logo-rat">üêÄ</span>VERSE
                    </span>
                </div>
                <span class="market-title">PhettaMarket</span>
            </div>
            <div class="header-actions">
                <button id="connectWallet" class="btn btn-primary">Connect Wallet</button>
            </div>
        </div>
    </header>

    <div class="container">
        <main>

            <div class="wallet-section">
                <div id="walletInfo" class="wallet-info hidden">
                    <div class="balance-display">
                        <div class="balance-item main-balance">
                            <span class="balance-label">Your PNR Balance</span>
                            <span id="pnrBalance" class="balance-value large">0 PNR</span>
                            <button class="btn btn-refresh" onclick="updateBalance()" title="Refresh balance">üîÑ</button>
                        </div>
                        <div class="balance-item">
                            <span class="balance-label">Portfolio Value</span>
                            <span id="portfolioValue" class="balance-value">0 PNR</span>
                        </div>
                    </div>
                </div>
                
                <div class="buy-tokens-section">
                    <h3>üí∞ Buy PNR Tokens</h3>
                    <p class="buy-description">Get PNR tokens to bet on Phettaverse predictions!</p>
                    <div class="buy-buttons">
                        <a href="https://app.uniswap.org/#/swap?outputCurrency=0xffe45fb9d4400904a49f5ac28ba6e74993410b01" target="_blank" class="btn btn-buy-uniswap">
                            ü¶Ñ Buy on Uniswap
                        </a>
                        <button class="btn btn-buy-vibecoin" onclick="openVibecoinBuy()">
                            ‚ö° Buy via Vibecoin
                        </button>
                    </div>
                    <div class="token-address">
                        <span class="address-label">PNR Contract:</span>
                        <code id="pnrAddress" class="address-code" onclick="copyAddress()" title="Click to copy">0xffe45fb9d4400904a49f5ac28ba6e74993410b01</code>
                        <span class="copy-hint">(click to copy)</span>
                    </div>
                </div>
            </div>
            
            <div class="token-info">
                <h3>üìä PNR Token Info</h3>
                <div id="tokenData" class="token-data">
                    <div class="token-stat">
                        <span class="stat-label">Price:</span>
                        <span id="tokenPrice">Loading...</span>
                    </div>
                    <div class="token-stat">
                        <span class="stat-label">Market Cap:</span>
                        <span id="tokenMarketCap">Loading...</span>
                    </div>
                    <div class="token-stat">
                        <span class="stat-label">Volume (24h):</span>
                        <span id="tokenVolume">Loading...</span>
                    </div>
                </div>
            </div>
        </div>

            <div class="markets-section">
                <div class="section-header">
                    <h2>Active Markets</h2>
                    <div class="market-controls">
                        <select id="marketFilter" class="market-filter" onchange="setMarketFilter(this.value)">
                            <option value="all">All Types</option>
                            <option value="sprint">Sprints</option>
                            <option value="journey">Journeys</option>
                            <option value="epoch">Epoch Quests</option>
                        </select>
                        <select id="marketSort" class="market-sort" onchange="setMarketSort(this.value)">
                            <option value="time">Time Left</option>
                            <option value="volume">Volume</option>
                            <option value="odds">Closest Odds</option>
                        </select>
                    </div>
                </div>
                <p class="market-info">Each market resolves randomly (coin flip). Bet on YES or NO!</p>
            
            <div id="marketsList" class="markets-list">
                <!-- Markets will be dynamically generated -->
            </div>
        </div>

            <!-- VIBE Oracles & Lore Launchpad -->
            <section class="vibe-meta-section">
                <div class="vibe-oracles-panel">
                    <h2 class="vibe-title">VIBE ORACLES // ON‚ÄëCHAIN WEATHER</h2>
                    <p class="vibe-subtitle">
                        Real tokens. Fake prophets. We scrape the Vibecoin pools and pretend it‚Äôs destiny.
                    </p>
                    <ul class="vibe-list">
                        <li><span class="vibe-bullet">‚Ä¢</span> Spin up Phettaverse quest tokens via Vibecoin‚Äôs <code>launch</code> tool, then let PhettaMarket bet on their fate.</li>
                        <li><span class="vibe-bullet">‚Ä¢</span> Use on‚Äëchain stats (market cap, volume, price) from <code>https://vibecoin.up.railway.app/graphql</code> as ‚Äúoracles‚Äù for special markets.</li>
                        <li><span class="vibe-bullet">‚Ä¢</span> When volume spikes on a quest token, trigger surprise Dreamstate events and jackpot surges.</li>
                    </ul>
                    <p class="vibe-footnote">
                        Think of it as Adult Swim CNBC: the charts are real, the bets are a bit too honest about being fake.
                    </p>
                </div>

                <div class="vibe-launchpad-panel">
                    <h2 class="vibe-title">LORE LAUNCHPAD // VIBE MCP</h2>
                    <p class="vibe-subtitle">
                        Each cursed story arc gets its own ERC‚Äë20. Your terminal is the summoning circle.
                    </p>
                    <ol class="vibe-list numbered">
                        <li><span class="vibe-step">1</span> In Claude Code, add the Vibecoin MCP and whisper: <code>launch my vibe coded app on Ethereum</code>.</li>
                        <li><span class="vibe-step">2</span> Mint a token per arc: <code>HMM</code> (Hidden Milk Moon), <code>PURPLETUES</code>, <code>BOBAWHISPER</code>, etc.</li>
                        <li><span class="vibe-step">3</span> Paste each token address into PhettaMarket config and treat its pool as the ‚Äúunderlying reality‚Äù for a cluster of markets.</li>
                    </ol>
                    <p class="vibe-footnote">
                        You earn 1% of every trade forever. In‚Äëworld, that‚Äôs just ‚ÄúTHE HOUSE IS FEEDING.‚Äù Out‚Äëof‚Äëworld, it‚Äôs Vibecoin‚Äôs fee stream.
                    </p>
                    <p class="vibe-hook">
                        Stake your PNR. Spin up lore tokens. Let the bonding curves write canon.
                    </p>
                </div>
            </section>

            <!-- Player Stats & Game Systems -->
            <div class="game-systems">
                <div class="player-stats-section">
                    <h2>üìä Your Stats</h2>
                    <div id="playerStats" class="player-stats">
                        <!-- Stats will be dynamically generated -->
                    </div>
                    <div class="traits-section">
                        <h3>üéÅ Unlocked Traits</h3>
                        <div id="playerTraits" class="traits-list">
                            <!-- Traits will be dynamically generated -->
                        </div>
                    </div>
                    <div class="achievements-section">
                        <h3>üèÜ Achievements</h3>
                        <div id="playerAchievements" class="achievements-list">
                            <!-- Achievements will be dynamically generated -->
                        </div>
                    </div>
                </div>
                
                <div class="emotion-index-section">
                    <h2>üß† Emotion Index</h2>
                    <p class="section-description">Track your betting moods across the Phettaverse</p>
                    <div id="emotionIndex" class="emotion-index">
                        <!-- Emotion index will be dynamically generated -->
                    </div>
                </div>
                
                <div class="jackpot-section">
                    <h2>üé∞ Dreamstate Jackpot</h2>
                    <p class="section-description">5% of every bet feeds the jackpot. 1% chance to win on any successful bet!</p>
                    <div id="dreamstateJackpot" class="dreamstate-jackpot">
                        <!-- Jackpot will be dynamically generated -->
                    </div>
                </div>
                
                <div class="event-feed-section">
                    <h2>üì° Live Event Feed</h2>
                    <p class="section-description">See what's happening in the Phettaverse</p>
                    <div id="eventFeed" class="event-feed">
                        <!-- Events will be dynamically generated -->
                    </div>
                </div>
            </div>
            
            <div class="my-positions">
                <h2>My Positions</h2>
            <div id="positionsList" class="positions-list">
                <p class="empty-state">No active positions. Place a bet to get started!</p>
            </div>
        </div>

        </main>
    </div>
    
    <!-- Notifications -->
    <div id="oracleMessage" class="oracle-message" style="display: none;"></div>
    <div id="traitUnlock" class="trait-unlock-notification" style="display: none;"></div>
    <div id="jackpotWin" class="jackpot-win-notification" style="display: none;"></div>

    <!-- Adult Swim style ticker -->
    <div class="phetta-ticker">
        <div class="ticker-label">PhettaMarket // VIBE FEED</div>
        <div class="ticker-track">
            <div class="ticker-strip">
                <span class="ticker-item">PHE TTA NEEDS RENT &nbsp;‚Ä¢&nbsp;</span>
                <span class="ticker-item">VIBE MCP: 1% OF EVERY TRADE GOES TO THE HOUSE &nbsp;‚Ä¢&nbsp;</span>
                <span class="ticker-item">HIDDEN MILK MOON REMAINS UNDISCOVERED &nbsp;‚Ä¢&nbsp;</span>
                <span class="ticker-item">BOBA WHISPERS: ‚ÄúTHIS IS NOT FINANCIAL ADVICE, IT‚ÄôS A BIT‚Äù &nbsp;‚Ä¢&nbsp;</span>
                <span class="ticker-item">EMOTION INDEX: DREAMSTATE SPIKING, ANXIETY QUIETLY HUMMING &nbsp;‚Ä¢&nbsp;</span>
                <span class="ticker-item">VIBECOIN ORACLES REPORT: LIQUIDITY LOOKS FERAL &nbsp;‚Ä¢&nbsp;</span>
                <span class="ticker-item">STAKE YOUR PNR. PREDICT THE UNPREDICTABLE. LAUGH AT THE OUTCOME. &nbsp;‚Ä¢&nbsp;</span>
                <span class="ticker-item">SHELDON STILL MAPPING GOOBERLAND. ODDS UNLISTED. &nbsp;‚Ä¢&nbsp;</span>
            </div>
        </div>
    </div>

    <footer>
        <p>‚ö†Ô∏è This is a silly prediction market. Outcomes are randomly determined. Use at your own risk! ‚ö†Ô∏è</p>
        <p>PNR Token: <code>0xffe45fb9d4400904a49f5ac28ba6e74993410b01</code></p>
        <p>Powered by <a href="https://emotionull.art/" target="_blank">Phettaverse</a></p>
    </footer>

    <!-- Market Modal -->
    <div id="marketModal" class="modal hidden">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modalTitle">Place Your Bet</h2>
            <div id="modalMarketInfo" class="modal-market-info"></div>
            <div class="bet-options">
                <button class="btn btn-yes" onclick="placeBet(true)">‚úÖ YES</button>
                <button class="btn btn-no" onclick="placeBet(false)">‚ùå NO</button>
            </div>
            <div class="bet-amount">
                <label>Bet Amount (PNR):</label>
                <div class="quick-bet-buttons">
                    <button type="button" class="btn-quick-bet" onclick="setBetAmount(10)">10</button>
                    <button type="button" class="btn-quick-bet" onclick="setBetAmount(50)">50</button>
                    <button type="button" class="btn-quick-bet" onclick="setBetAmount(100)">100</button>
                    <button type="button" class="btn-quick-bet" onclick="setBetAmount(500)">500</button>
                </div>
                <input type="number" id="betAmount" min="1" value="10" step="1">
            </div>
            <div id="modalStatus" class="modal-status"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
